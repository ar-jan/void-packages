# Template file for 'sqlitestudio'
pkgname=sqlitestudio
version=3.3.3
revision=1
build_style=qmake
hostmakedepends="qt5-host-tools qt5-qmake"
makedepends="ncurses-devel qt5-devel qt5-script-devel qt5-svg-devel
 qt5-tools-devel readline-devel sqlite-devel tcl-devel"
short_desc="Free, open source, multi-platform SQLite database manager"
maintainer="Arjan Mossel <arjanmossel@gmail.com>"
license="custom:GPL-3.0-only-with-OpenSSL-exception"
homepage="https://sqlitestudio.pl/"
distfiles="https://github.com/pawelsalawa/sqlitestudio/archive/$version.tar.gz"
checksum=f234e1ea87d27e80a1794f86d32116ebd8919d51be63d35a7d0816a77115ce31
nocross="need to untangle libs and includes for multiple .pro files?"

do_configure() {
	mkdir -p output/build/Plugins
	cd output/build
	qmake ${wrksrc}/SQLiteStudio3
	cd ${wrksrc}/output/build/Plugins
	qmake ${wrksrc}/Plugins
}

do_build() {
	make -C output/build
	make -C output/build/Plugins
}

do_install() {
	make INSTALL_ROOT=${DESTDIR} install -C output/build
	make INSTALL_ROOT=${DESTDIR} install -C output/build/Plugins
	vinstall SQLiteStudio3/guiSQLiteStudio/img/sqlitestudio.svg 644 usr/share/icons/hicolor/scalable/apps
	vinstall ${FILESDIR}/sqlitestudio.desktop 644 usr/share/applications
}

post_install() {
	vlicense LICENSE
}
